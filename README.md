# Тестовое задание DaData

## Описание проекта

Это Laravel-приложение, реализующее интеграцию с API DaData для выполнения различных операций по обработке и валидации данных.

## Стек технологий

- **Backend**: Laravel 12
- **Frontend**: Vue.js
- **База данных**: PostgreSQL
- **Контейнеризация**: Docker
- **API документация**: Scribe
- **Интеграция с DaData**: hflabs/dadata библиотека

## Стандарты кодирования

Проект следует стандартам PSR-12 для форматирования кода. Для обеспечения соответствия стандартам используются следующие инструменты:
- **PHP CS Fixer** (`friendsofphp/php-cs-fixer`) с конфигурацией, включающей стандарты `@PSR12`

## Архитектура проекта

- `backend/` - Laravel-приложение с интеграцией DaData
- `docker/` - Конфигурационные файлы для Docker-контейнеров
- `compose.yml` - Docker Compose конфигурация
- `start.sh` - Скрипт автоматической настройки и запуска проекта

## Установка и запуск

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/AndreyZakhvatoshin/dadata.git
   cd dadata
   ```

2. Запустите установочный скрипт:

   ```bash
   chmod +x start.sh
   ./start.sh
   ```

   Скрипт выполнит следующие действия:
   - Проверит наличие Docker Compose
   - Создаст файл `.env` из `.env.example`
   - Настроит подключение к базе данных для Docker-окружения
   - Запустит контейнеры (PHP, Nginx, PostgreSQL)
   - Установит зависимости Composer
   - Выполнит миграции базы данных

3. После запуска приложение будет доступно по адресу: http://localhost:8000

### Ручной запуск

Если вы предпочитаете настроить проект вручную:

1. Убедитесь, что у вас установлены:
   - PHP 8.2+
   - Composer
   - Docker и Docker Compose
   - Node.js и npm

2. Перейдите в директорию `backend` и скопируйте `.env.example` в `.env`:

   ```bash
   cd backend
   cp .env.example .env
   ```

3. Установите зависимости:

   ```bash
   composer install
   npm install
   ```

4. Сгенерируйте ключ приложения:

   ```bash
   php artisan key:generate
   ```

5. Настройте подключение к базе данных в файле `.env` (если используется Docker, установите `DB_HOST=db`)

6. Выполните миграции:

   ```bash
   php artisan migrate
   ```

7. Запустите сервер разработки:

   ```bash
   php artisan serve
   ```

## Интеграция с DaData

Проект использует библиотеку `hflabs/dadata` для работы с API DaData. Эта интеграция позволяет:
- Проверять и валидировать адреса
- Осуществлять проверку и нормализацию юридических и физических лиц
- Валидировать банковские реквизиты
- Другие операции валидации данных

## API документация

Документация к API генерируется с помощью пакета `knuckleswtf/scribe` и доступна по адресу `/docs` в приложении после запуска.
docker-compose exec php php artisan scribe:generate

## Docker конфигурация

Проект использует следующие контейнеры:
- **PHP**: Контейнер с PHP и Laravel приложением
- **Nginx**: Веб-сервер для обслуживания статических файлов
- **PostgreSQL**: База данных

## Тестирование

Для запуска тестов используйте команду:

```bash
php artisan test
```

## Дополнительные команды

- `composer setup` - Полная установка проекта (зависимости, миграции, сборка фронтенда)
- `composer dev` - Запуск сервера разработки с одновременным запуском очередей и логов
- `composer test` - Запуск тестов

## Лицензия

MIT